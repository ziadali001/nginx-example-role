{# roles/nginx-role/templates/nginx.conf.j2 #}
server {
    listen 80;
    server_name {{ nginx_server_name }};

    location / {
        root /var/www/html;
        index index.html index.htm;

        # Deny access by default
        deny all;

        # Allow access only from specified IPs
        {% for ip in allowed_ips %}
        allow {{ ip }};
        {% endfor %}
    }
}
